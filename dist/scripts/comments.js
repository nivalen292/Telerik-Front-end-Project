"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setProperUrl=exports.postComment=void 0;var _requester=require("./requester"),setProperUrl=function(e){var t=$(e.target).parent().parent().parent();t.parent().hasClass("subcomments")&&(t=t.parent().parent());var r=$(".comment").index(t);r<0&&(r=-2),window.sessionStorage.setItem("commentIndex",r)},postComment=function(e){var t=+window.location.href.split("posts/")[1].split("/")[0],r={author:$("#form-nickname").val(),imageUrl:$("#form-avatarUrl").val(),content:$("#form-message").val()};(0,_requester.post)("https://news-project.herokuapp.com/posts/"+t+"/comments/"+window.sessionStorage.getItem("commentIndex"),r).then(function(){return getTemplate("selected-post").then(function(e){return rawTemplate=e,getRequest("https://news-project.herokuapp.com/posts/"+t)}).then(function(e){var t=Handlebars.compile(rawTemplate);$("main").html(t({post:e}))})})};exports.postComment=postComment,exports.setProperUrl=setProperUrl;